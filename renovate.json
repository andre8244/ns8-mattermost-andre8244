{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "local>NethServer/.github:base",
    ":maintainLockFilesMonthly",
    ":automergePatch"
  ],
  "forkProcessing": "enabled",
  "branchPrefix": "renovate-",
  "branchNameStrict": true,
  "vulnerabilityAlerts": {
    "enabled": true,
    "ignoreDeps": ["vue"]
  },
  "rebaseWhen": "never",
  "keepUpdatedLabel": "auto-update",
  "packageRules": [
    {
      "description": "Enable digest pinning only for Debian and Ubuntu base images",
      "matchManagers": ["dockerfile"],
      "matchDepNames": ["docker.io/library/debian", "docker.io/library/ubuntu"],
      "matchFileNames": ["(^|/)Containerfile$", "(^|/)Dockerfile$"],
      "pinDigests": true,
      "automerge": true
    },
    {
      "matchPackageNames": ["vue", "vue-template-compiler"],
      "allowedVersions": "<3.0.0"
    },
    {
      "description": "Disable updates for Vue CLI monorepo packages to avoid node and @achrinza/node-ipc compatibility issues",
      "matchPackagePatterns": [
        "^@vue/cli-",
        "@vue/cli"
      ],
      "enabled": false
    },
    {
      "matchPackageNames": ["mattermost/mattermost-team-edition"],
      "allowedVersions": "10.5.*",
      "groupName": "ESR 10.5.x updates",
      "automerge": true
    },
    {
      "matchPackageNames": ["mattermost/mattermost-team-edition"],
      "matchUpdateTypes": ["major", "minor"],
      "groupName": "Non-ESR update",
      "automerge": false
    }
  ]
}
